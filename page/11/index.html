<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Page 11 of 12 for katsyoshi のめもみたいなの - page 11 | katsyoshi のめもみたいなの</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="katsyoshi のめもみたいなの - page 11" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="It’s a memos." />
<meta property="og:description" content="It’s a memos." />
<link rel="canonical" href="https://blog.katsyoshi.org/page/11/" />
<meta property="og:url" content="https://blog.katsyoshi.org/page/11/" />
<meta property="og:site_name" content="katsyoshi のめもみたいなの" />
<meta property="og:type" content="website" />
<link rel="prev" href="https://blog.katsyoshi.org/page/10/" />
<link rel="next" href="https://blog.katsyoshi.org/page/12/" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="katsyoshi のめもみたいなの - page 11" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"It’s a memos.","headline":"katsyoshi のめもみたいなの - page 11","url":"https://blog.katsyoshi.org/page/11/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://blog.katsyoshi.org/feed.xml" title="katsyoshi のめもみたいなの" /></head>
<body><header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/">katsyoshi のめもみたいなの</a>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <!-- Pagination links -->
<div class="pagination">
  
    <a href="/page/10/" class="previous">
      Previous
    </a>
  
  <span class="page_number ">
    Page: 11 of 12
  </span>
  
    <a href="/page/12/" class="next">Next</a>
  
</div>



  <h1><a href="/blog/2014/08/20/gentoo-install-battle-part-i/">Gentoo Install Battle Part I</a></h1>
  <p class="author">
    <span class="date">2014-08-20 23:48:45 +0900</span>
  </p>
  <div class="content">
    <p>ここにThinkPad X240があります。これの中身を Gentoo/Linux にします。</p>

<h2 id="準備">準備</h2>

<p>準備として、Gentoo/LinuxのLiveCDを作成、Bootの設定を行います。</p>

<h3 id="イメージ作成">イメージ作成</h3>
<p>まずLiveCDイメージをダウンロードしUSBフラッシュメモリにコピーします。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ wget ftp://ftp.iij.ad.jp/pub/linux/gentoo/releases/amd64/autobuilds/current-iso/install-amd64-minimal-20140814.iso
$ dd of=/path/to/disk if=install-amd64-minimal-20140814.iso bs=4m
</code></pre></div></div>

<p>でイメージの作成終了です。
次に、X240の設定を行います。</p>

<h3 id="x240の起動準備">X240の起動準備</h3>
<p>Windowsを起動し、Shift押しながら再起動します。
再起動したら、以下の順番でBIOSを起動させます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>トラブルシューティング -&gt; 詳細オプション -&gt; UEFIファームウェアの設定 -&gt; 再起動
</code></pre></div></div>

<p>でBIOSがたちあがるので、Secure BootとUEFI BootとBoot順の設定を変更します。</p>

<p>Seucre Bootでは<code class="language-plaintext highlighter-rouge">Securety -&gt; Secure Boot -&gt; Secure Boot [Enable]</code>を<code class="language-plaintext highlighter-rouge">[Disable]</code>に変更</p>

<p>UEFI Bootでは<code class="language-plaintext highlighter-rouge">Startup -&gt; UEFI/Legacy Boot [UEFI only]</code>を<code class="language-plaintext highlighter-rouge">[Both]</code>に変更</p>

<p>Boot順の設定では、<code class="language-plaintext highlighter-rouge">Startup -&gt; Boot</code>でBootさせたい順番に変更</p>

<p>BIOSを変更したらRestartします。</p>

<h2 id="まとめ">まとめ</h2>

<p>とりあえず今日はここで終りです。インストールは明日以降にします。</p>

  </div>

  <h1><a href="/blog/2014/08/10/good-bye-elasticsearch-and-jenkins/">good-bye elasticsearch and jenkins</a></h1>
  <p class="author">
    <span class="date">2014-08-10 23:22:55 +0900</span>
  </p>
  <div class="content">
    <p>この環境では慢性的にメモリが足りなかったのでメモリを大量に使ってる<a href="http://www.elasticsearch.org/">Elasticsearch</a>を削除しました。
Jenkinsについては利用していなかったので停止してます。ついでに12.04から14.04にupgradeしました。</p>

<h2 id="削除とupgrade">削除とUpgrade</h2>
<p>削除する前に<a href="https://mackerel.io">Mackerel</a>を導入したので、fluentd + Elasticsearch + Kibanaな構成にする必要がなくなりました。
Elasticsearchの削除とJenkinsの停止は以下のコマンドで行ないます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo apt-get purge elasticsearch
$ sudo update-rc.d jenkins disable
</code></pre></div></div>

<p>つぎに14.04へupgradeを行ないます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo do-release-upgrade -d
</code></pre></div></div>

<p>これで14.04になってます。</p>

<h2 id="環境">環境</h2>
<ul>
  <li>Machine: さくらVPS</li>
  <li>CPU: Intel Xeon E312xx (SandyBridge) * 2</li>
  <li>MEM: 1GB</li>
  <li>HDD: 100GB</li>
  <li>OS: Ubuntu Linux 12.04</li>
</ul>

<h2 id="インストール済ソフトウェア一部">インストール済ソフトウェア（一部）</h2>
<ul>
  <li>Elasticsearch</li>
  <li>fluentd</li>
  <li>Jenkins</li>
  <li>Jubatus</li>
  <li>Norikra</li>
  <li>Nginx</li>
</ul>

  </div>

  <h1><a href="/blog/2014/07/22/akiyamago-hackathon-2014/">秘境でハッカソンがあったので行ってきた</a></h1>
  <p class="author">
    <span class="date">2014-07-22 20:09:11 +0900</span>
  </p>
  <div class="content">
    <p>7月19日〜7月21日まで秋山郷の<a href="https://www.google.co.jp/maps/place/%E3%81%8B%E3%81%9F%E3%81%8F%E3%82%8A%E3%81%AE%E5%AE%BF/@36.9184265,138.6375958,18z/data=!4m2!3m1!1s0x0:0xec3b9141469e30fc">かたくりの宿</a>という場所でHackathonがあったので行ってきました。</p>

<h2 id="1日目">1日目</h2>
<p>1日目は仕事があったので仕事を終えてから新幹線で越後湯沢まで出て、<a href="https://twitter.com/m_asama">@m_asama</a>さんと合流して秋山郷へ。</p>

<p>途中、最短経路が<a href="http://www.city.tokamachi.lg.jp/page/10040200057.html">土砂に埋もれて</a>通行できないので<a href="http://www.pref.niigata.lg.jp/tokamachi_seibi/1356771341657.html">迂回</a>して行きました。途中の道は狹く、えっここ通るの？って感じの道を通りました。宿に着いたらもう午後6時ですぐに食事の時間となりました。</p>

<p>夕飯は山菜づくしな夕飯でした。</p>

<p>夕飯終ってハックタイムでしたが、食堂を利用する予定だったので、食堂が空くまで部屋でだべってました。
午後9時頃からハックタイムが始まりました。その日はとても眠かったので<a href="https://twitter.com/kotatsu_mi">@kotatu_mi</a>に絡んですぐに寝ました。</p>

<h2 id="2日目">2日目</h2>
<p>2日目は宿の人に起こされて起きました。朝食はこんなかんじでした。</p>

<p><img src="/images/photo/akiyamago-2breakfast.jpg" alt="二日目朝食" /></p>

<p>朝食後、<a href="https://www.google.co.jp/maps/place/%E8%A6%8B%E5%80%89%E6%A9%8B/@36.91872,138.637115,17z/data=!3m1!4b1!4m2!3m1!1s0x5ff601b97e1ba7bb:0x1577cfb29a624fa7">近くの橋</a>まで散歩しました。軽い散歩だと思ってたら、山道で辛かった。</p>

<p><img src="/images/photo/akiyamago-mikura-hashi.jpg" alt="見倉橋" /></p>

<p>そのまま帰るのはもったいないと思って反対側を登りました。登りきったら、近くにcool wind holeがあるらしいのでそこまで行ってみました。</p>

<p><img src="/images/photo/akiyamago-cool-wind-hole.jpg" alt="風穴" /></p>

<p>帰りは山道がつらいしつかれたので、周って帰りました。</p>

<p>昼飯は<a href="https://www.google.co.jp/maps/place/%E6%A5%BD%E9%A4%8A%E9%A4%A8/@36.9179309,138.6369755,13z/data=!4m5!1m2!2m1!1z5bCP6LWk5rKi!3m1!1s0x601dff32c6304d99:0xaacce4d76fa870ff">小赤沢</a>まで温泉と熊らーめんを食べました。</p>

<p><img src="/images/photo/akiyamago-kuma-ramen.jpg" alt="熊らーめん" /></p>

<p>宿に戻ってからはしばらくはハックタイムでした。夕食後、星を見に外出たらすごく星が綺麗でした。</p>

<p><img src="/images/photo/akiyamago-milkyway.jpg" alt="星きれい" /></p>

<p>星見に行ったあとにハックタイムがあり、<a href="https://github.com/katsyoshi/mikutter-docker">mikutterでDockerのコントロール</a>をしようとしてました。</p>

<h2 id="3日目">3日目</h2>

<p>午前中は夜の続きをやってました。</p>

<p>帰りは<a href="https://www.google.co.jp/maps/place/%E5%88%87%E6%98%8E%E6%B8%A9%E6%B3%89/@36.8097569,138.6200903,18z/data=!4m7!1m4!3m3!1s0x601dff32c6304d99:0xaacce4d76fa870ff!2z5qW96aSK6aSo!3b1!3m1!1s0x0:0x30280b0e98e9ad4a">切明温泉</a>にたちより、長野回りで帰りました。</p>

<h2 id="今回の成果">今回の成果</h2>

<p><a href="https://www.google.co.jp/search?q=%E6%88%90%E6%9E%9C%E4%BD%95%E3%82%82%E3%81%82%E3%82%8A%E3%81%BE%E3%81%9B%E3%82%93%E3%81%A7%E3%81%97%E3%81%9F%E3%83%BC&amp;newwindow=1&amp;espv=2&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ei=gmjOU9KXOcne8AXRl4KYCg&amp;ved=0CAYQ_AUoAQ&amp;biw=1166&amp;bih=986#facrc=_&amp;imgdii=_&amp;imgrc=tETgdA-yYjU4tM%253A%3BqWbTS9xBjlMpPM%3Bhttp%253A%252F%252Ftubagra.com%252Ftbg-wp%252Fwp-content%252Fuploads%252F2013%252F06%252F0213.jpg%3Bhttp%253A%252F%252Ftubagra.com%252F16457%252F%3B600%3B490">成果</a>です</p>

  </div>

  <h1><a href="/blog/2014/06/26/use-spdy-in-nginx/">SPDYをさくっと動かしてみた</a></h1>
  <p class="author">
    <span class="date">2014-06-26 13:59:19 +0900</span>
  </p>
  <div class="content">
    <p>NGINXでSPDY3.1が<a href="http://nginx.org/en/docs/http/ngx_http_spdy_module.html">サポートされている</a>ようなので動かしてみた。</p>

<h2 id="準備">準備</h2>
<p>SPDYは<a href="http://ja.wikipedia.org/wiki/SPDY#.E6.A6.82.E8.A6.81">SSL必須</a>のようなのでとりあえずOpenSSLで<a href="http://dogmap.jp/2011/05/10/nginx-ssl/">野良証明書を作成</a>します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd /path/to/cert/dir
$ openssl genrsa -des3 -out server.key 2048
$ openssl req -new -key server.key -out server.csr
$ openssl rsa -in server.key.org -out server.key
$ openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt
</code></pre></div></div>

<h2 id="nginxの設定">NGINXの設定</h2>

<p>とりあえずNGINXの<a href="http://nginx.org/en/docs/http/ngx_http_spdy_module.html">設定ファイルを作成</a>します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>server {
    listen 443 ssl spdy;
    ssl_certificate server.crt;
    ssl_certificate_key server.key;
}
</code></pre></div></div>

<p>と設定したらNGINXを再起動します。
これでSPDYで動いてます。わいわい。</p>

<p><img src="/images/photo/spdy.png" alt="SPDY" /></p>

<p>オレオレ証明書なのでそのうちちゃんとした証明書を使いたいですね。</p>

  </div>

  <h1><a href="/blog/2014/06/22/fail-git-uploading/">野良Gitサーバにuploadできなかった話</a></h1>
  <p class="author">
    <span class="date">2014-06-22 22:38:20 +0900</span>
  </p>
  <div class="content">
    <p>今日もろくでもない理由で嵌った。</p>

<h2 id="嵌った理由">嵌った理由</h2>
<p>野良Gitサーバを立てているのでそこに新しいリポジトリを作成した。</p>

<p>で、リモートを追加し、ブランチを追加しようとすると</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git remote add master ssh://myhost/my_project.git
$ git push origin master -f
error: src refspec master does not match any.
error: failed to push some refs to 'ssh://myhost/my_project.git'
</code></pre></div></div>

<p>というようなエラーが出てきてアップロードできなかった。
そのため理由を探ってたら<a href="http://d.hatena.ne.jp/nishiohirokazu/20110304/1299229916">同じ理由</a>があった。</p>

<p>そこで <code class="language-plaintext highlighter-rouge">git log</code> としたら何もでてこなかったので</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git add .
$ git commit -m 'first commit'
$ git push -u origin master
</code></pre></div></div>

<p>リモートリポジトリに追加できました。
ちゃんちゃん</p>

  </div>

  <h1><a href="/blog/2014/06/10/pitfall-in-boot2docker/">docker on OS Xで嵌ったおはなし</a></h1>
  <p class="author">
    <span class="date">2014-06-10 19:52:53 +0900</span>
  </p>
  <div class="content">
    <p>MacOS XでDockerを動かしてたら嵌ったのでメモ</p>

<h2 id="docker-on-os-x">Docker on OS X</h2>
<p>OS XでもDockerが<a href="http://docs.docker.com/installation/mac/">動かせるよう</a>になりました。
インストールは<a href="http://dev.classmethod.jp/tool/docker/getting-started-docker-on-osx/">ここ</a>とかを参考にしてください。</p>

<h2 id="で嵌ったところ">で嵌ったところ</h2>
<p>Docker上で動いているアプリケーションとどうしても通信ができない。どうやらDockerとアプリケーションは起動はしてるようなんだが、
どうしても通信できないということがわかりました。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run -p 9199:9199 hogehoge
$ netstat -a | grep 9199
</code></pre></div></div>

<p>でも見えない。なんでかなあと思ってたら<a href="https://github.com/dotcloud/docker/issues/4007">こんな</a>ことや<a href="http://k-shogo.github.io/article/2014/02/13/boot2docker-portforward/">こんな</a>ことがわかりました。</p>

<h2 id="解決策">解決策</h2>
<p>VirtualBoxからboot2docker-vmのポートフォワードを設定すればいいです。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ netstat -a | grep 9199
tcp4       0      0  localhost.9199         *.*                    LISTEN
</code></pre></div></div>

<p>ちゃんちゃん。</p>

  </div>

  <h1><a href="/blog/2014/06/02/github-cleanup/">今日の夕飯</a></h1>
  <p class="author">
    <span class="date">2014-06-02 00:25:40 +0900</span>
  </p>
  <div class="content">
    <p>今日は昨日ビールを飲んだので、日本酒を飲みに行ってきた。
<img src="/images/photo/yaesu-beer.jpg" alt="昨日のビール" /></p>

<p>ほんとは、天麩羅食べたかったのだが、天麩羅もうなくなってたらしいので、
日本酒とそばを食べた。そばを石臼で引いた。</p>

<p><img src="/images/photo/kameari-soba.jpg" alt="石臼" /></p>

<p>親父さんが江戸っこらしく、「そこのしろいテーブルに座って」っていわれてなんだ？
っておもったら、広いテーブルだった。
<img src="/images/photo/kameari-miso.jpg" alt="お通し" /></p>

<p>あと、githubにある使ってないリポジトリの整理を行った。</p>

  </div>

  <h1><a href="/blog/2014/05/21/new-td-agent-for-mac/">td-agent.pkg</a></h1>
  <p class="author">
    <span class="date">2014-05-21 08:53:46 +0900</span>
  </p>
  <div class="content">
    <p>td-agent2が<a href="https://groups.google.com/forum/?fromgroups#!topic/fluentd/ZjxODonIJJo">リリース</a>され、Macへの公式パッケージがでたのでインストールメモ</p>

<h2 id="install">Install</h2>

<p><a href="https://s3.amazonaws.com/td-agent-repository/macosx/td-agent2-1.0.0-0.dmg">ダウンロード</a>してダブルクリックでインストールできます。</p>

<h2 id="設定">設定</h2>
<p>設定ファイル置場は<code class="language-plaintext highlighter-rouge">/etc/td-agent/td-agent.conf</code>になります。
設定ファイルはいままでの設定で使えるようです。
あとは<a href="https://groups.google.com/forum/?fromgroups#!topic/fluentd/ZjxODonIJJo">ML</a>にあるとおりにコマンドを実行すればOKです。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo launchctl load /Library/LaunchDaemon/td-agent.plist
</code></pre></div></div>

  </div>

  <h1><a href="/blog/2014/05/12/jubatus-runs-on-docker/">JubatusをDocker上で動かしてみた</a></h1>
  <p class="author">
    <span class="date">2014-05-12 23:50:33 +0900</span>
  </p>
  <div class="content">
    <p>最近話題の<a href="https://www.docker.io/">Docker</a>使ってJubatusを動かしてみたのでメモ的なものを</p>

<h2 id="環境">環境</h2>
<p>環境はVagrantでUbuntu14.04を動かしその上でDockerでJubatusVMを動作</p>

<ul>
  <li>Vagrant: 1.5.4</li>
  <li>docker: 0.11.1</li>
</ul>

<h2 id="dockerfile">Dockerfile</h2>

<p><a href="https://github.com/katsyoshi/docker-jubatus">リポジトリ</a>を作成しておきましたのでcloneして実行します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/katsyoshi/docker-jubatus
$ cd docker-jubatus
$ docker build .
$ docker run -p 9199:9199 最後に出てきたハッシュ値
</code></pre></div></div>

<p>で動きはじめます。</p>

  </div>

  <h1><a href="/blog/2014/04/21/jubatus-handson-and-fluent-plugin-jubatus/">jubatus handsonにいってきたのでfluent-plugin-jubatusについてちょっとだけ</a></h1>
  <p class="author">
    <span class="date">2014-04-21 23:45:43 +0900</span>
  </p>
  <div class="content">
    <h2 id="jubatus-handson行ってきました"><a href="http://connpass.com/event/5641/">Jubatus Handson</a>行ってきました</h2>

<p>行ってきました。</p>

<h2 id="fluent-plugin-jubatus-002をリリースしました">fluent-plugin-jubatus 0.0.2をリリースしました</h2>

<p>先日<a href="http://regional.rubykaigi.org/oedo04">大江戸Ruby会議04</a>に行ってみたらやる気が湧いてきたので半年ほど寝かせておいた<a href="http://rubygems.org/gems/fluent-plugin-jubatus">fluent-plugin-jubatus</a>をアップデートしました。</p>

<p>大きな変更点としては、異常検知（jubaanomaly）をサポートするようになってます。</p>

<h3 id="プラグインの今後">プラグインの今後</h3>

<p>今回も入れなかったのですが、このプラグインでは未だ判定のみのサポートです。
理由としては</p>

<ul>
  <li>計算量</li>
  <li>メモリ</li>
</ul>

<p>のふたつがあげられます。計算量に関しては以前手元のMacで異常検出を動作させていたときマシンの動作がもっさりになるほどの計算量があったためです。メモリに関しては今のところ不安には感じてはいないですが、データ量(数)が巨大になったときどこまで必要なのかってのがよくわからない。という理由で積極的に導入していないです。</p>

<p>これらを解消する方法としては忘却(<a href="https://github.com/jubatus/jubatus/tree/feature/unlearning">unlearning</a>)が考えられるのですが、じゃぁどの必要のないデータを忘却させるのって問題があります。</p>

<p>とはいえ、そろそろ導入したいので<a href="https://github.com/katsyoshi/fluent-plugin-jubatus">pull req</a>まってます。</p>


  </div>


<!-- Pagination links -->
<div class="pagination">
  
    <a href="/page/10/" class="previous">
      Previous
    </a>
  
  <span class="page_number ">
    Page: 11 of 12
  </span>
  
    <a href="/page/12/" class="next">Next</a>
  
</div>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">katsyoshi のめもみたいなの</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">katsyoshi のめもみたいなの</li><li><a class="u-email" href="mailto:web@katsyoshi.org">web@katsyoshi.org</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/katsyoshi"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">katsyoshi</span></a></li><li><a href="https://www.twitter.com/katsyoshi"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">katsyoshi</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>It&#39;s a memos.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
