<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: elasticsearch | katsyoshiのめもみたいなもの]]></title>
  <link href="http://blog.katsyoshi.org/blog/categories/elasticsearch/atom.xml" rel="self"/>
  <link href="http://blog.katsyoshi.org/"/>
  <updated>2017-05-29T22:46:42+09:00</updated>
  <id>http://blog.katsyoshi.org/</id>
  <author>
    <name><![CDATA[katsyoshi]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[elasticsearchどの〜]]></title>
    <link href="http://blog.katsyoshi.org/blog/2015/06/26/sir-elasticsearch/"/>
    <updated>2015-06-26T00:26:10+09:00</updated>
    <id>http://blog.katsyoshi.org/blog/2015/06/26/sir-elasticsearch</id>
    <content type="html"><![CDATA[<p><a href="https://www.elastic.co/products/kibana">kibana</a> で表示しようとしてたら嵌ったのでメモ</p>

<h2>嵌った原因</h2>

<p>数字をElasticsearchに投げているつもりが文字列を投げていた。
ので対処方法としては、 <code>fluent-plugin-typecast</code> を導入して終了。</p>

<p><code>xml
&lt;match elasticsearch.**.*&gt;
  type typecast
  item_types value:float
  prefix typed
&lt;/match&gt;
</code></p>

<h2>Elasticsearch</h2>

<p><a href="https://www.fluentd.org">fluentd</a> で集めたデータを <a href="http://www.elasitc.co">Elasticsearch</a> に <a href="https://github.com/uken/fluent-plugin-elasticsearch">fluent-plugin-elastchsearch</a> を利用して入れます。設定は以下のようにします。</p>

<p><code>xml
&lt;match typed.elasticserch.**.*&gt;
  type elasticsearch
  type_name hoge
  host 127.0.0.1
  port 9200
  logstash_format true
  logstash_prefix logstash
  flash_interval 1s
&lt;/match&gt;
</code></p>

<h2>おわり</h2>

<p>おわり</p>

<h3>参考資料</h3>

<ol>
<li><a href="http://blog.nomadscafe.jp/2014/03/dstat-fluentd-elasticsearch-kibana.html">http://blog.nomadscafe.jp/2014/03/dstat-fluentd-elasticsearch-kibana.html</a></li>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-core-types.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-core-types.html</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[good-bye elasticsearch and jenkins]]></title>
    <link href="http://blog.katsyoshi.org/blog/2014/08/10/good-bye-elasticsearch-and-jenkins/"/>
    <updated>2014-08-10T23:22:55+09:00</updated>
    <id>http://blog.katsyoshi.org/blog/2014/08/10/good-bye-elasticsearch-and-jenkins</id>
    <content type="html"><![CDATA[<p>この環境では慢性的にメモリが足りなかったのでメモリを大量に使ってる<a href="http://www.elasticsearch.org/">Elasticsearch</a>を削除しました。
Jenkinsについては利用していなかったので停止してます。ついでに12.04から14.04にupgradeしました。</p>

<h2>削除とUpgrade</h2>

<p>削除する前に<a href="https://mackerel.io">Mackerel</a>を導入したので、fluentd + Elasticsearch + Kibanaな構成にする必要がなくなりました。
Elasticsearchの削除とJenkinsの停止は以下のコマンドで行ないます。</p>

<p><code>sh
$ sudo apt-get purge elasticsearch
$ sudo update-rc.d jenkins disable
</code></p>

<p>つぎに14.04へupgradeを行ないます。</p>

<p><code>sh
$ sudo do-release-upgrade -d
</code></p>

<p>これで14.04になってます。</p>

<h2>環境</h2>

<ul>
<li>Machine: さくらVPS</li>
<li>CPU: Intel Xeon E312xx (SandyBridge) * 2</li>
<li>MEM: 1GB</li>
<li>HDD: 100GB</li>
<li>OS: Ubuntu Linux 12.04</li>
</ul>


<h2>インストール済ソフトウェア（一部）</h2>

<ul>
<li>Elasticsearch</li>
<li>fluentd</li>
<li>Jenkins</li>
<li>Jubatus</li>
<li>Norikra</li>
<li>Nginx</li>
</ul>

]]></content>
  </entry>
  
</feed>
