<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: tech | katsyoshiのめもみたいなもの]]></title>
  <link href="http://blog.katsyoshi.org/blog/categories/tech/atom.xml" rel="self"/>
  <link href="http://blog.katsyoshi.org/"/>
  <updated>2017-05-21T16:03:41+09:00</updated>
  <id>http://blog.katsyoshi.org/</id>
  <author>
    <name><![CDATA[katsyoshi]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[raspiでdnsを運用してみはじめた]]></title>
    <link href="http://blog.katsyoshi.org/blog/2017/04/09/use-dnsmasq-for-domestic-network/"/>
    <updated>2017-04-09T00:00:00+09:00</updated>
    <id>http://blog.katsyoshi.org/blog/2017/04/09/use-dnsmasq-for-domestic-network</id>
    <content type="html"><![CDATA[<p>RasPi2 が3台あってつかっていないので DNS として動かすようにしてみた。
RasPi とはいえ中身は Ubuntu Linux なのでのインストールは <code>apt install dnsmasq</code> するだけでおわります。</p>

<h2>はまったところ</h2>

<p>いつもどおりはまりました。今回は以下の二点</p>

<ul>
<li>/etc/dnsmasq.d/ に hosts ファイルを置くとエラー</li>
<li>/etc/hosts ファイルのパーミッションが <code>600</code> になっていたためエラー</li>
</ul>


<h3>/etc/dnsmasq.d/ に hosts ファイルを置くとエラー</h3>

<p>ログを見ても以下のログしか出ておらず理由の調査に時間がかかった。hosts ファイルは設定ファイルではないため当然といえば当然なのですが…</p>

<p><code>
Jan  1 00:00:08 localhost dnsmasq[673]: bad option at line 1 of /etc/dnsmasq.d/hosts
</code></p>

<p>今、<code>/etc/defaults/dnsmasq</code> を調べてみるとそうなってました。はい。</p>

<p><code>
CONFIG_DIR=/etc/dnsmasq.d,.dpkg-dist,.dpkg-old,.dpkg-new
</code></p>

<h3>/etc/hosts ファイルのパーミッションが <code>600</code> になっていたためエラー</h3>

<p>こちらは上記問題を解決したあと、反映されないのでログを見たときにわかりました。</p>

<p><code>
Apr  8 08:57:20 localhost dnsmasq[4733]: failed to load names from /etc/hosts: Permission denied
</code></p>

<p>これの原因は <code>itamae</code> でファイルを送信するときに <code>mode '644'</code> を指定する必要があったのだが、指定せずに
送信してしまったため発生。</p>

<h2>おわり</h2>

<p>おわり</p>

<h3>関連リポジトリ</h3>

<p><a href="https://github.com/katsyoshi/itamae-recipes">https://github.com/katsyoshi/itamae-recipes</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Elixirのインストール方法]]></title>
    <link href="http://blog.katsyoshi.org/blog/2017/04/01/how-to-install-elixir/"/>
    <updated>2017-04-01T09:00:00+09:00</updated>
    <id>http://blog.katsyoshi.org/blog/2017/04/01/how-to-install-elixir</id>
    <content type="html"><![CDATA[<p><a href="http://www.elixirconf.jp/">Elixir Conf Japan</a> に行きましたが、よく考えてみたら
まだこの PC に <a href="http://elixir-lang.org/">Elixir</a> をインストールしていないことに気がついたので
隣の<a href="https://twitter.com/zzak_jp">英語のうまいおじさん</a>にインストール方法を<a href="https://gist.github.com/katsyoshi/7ac2579bbe903ff65685570fd3873379">教えてもらいながら</a>インストールしました<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p>

<h2>準備</h2>

<p>ここでは <a href="https://gentoo.org/">Gentoo Linux</a> を前提としております。
まず、Elixir を動かすために <a href="https://www.erlang.org">Erlang</a> をインストールします。</p>

<p><code>console
sudo eix-sync
sudo emerge erlang
</code></p>

<p>準備はこれだけです。</p>

<h2>インストール</h2>

<p>次にインストールなのですが、Elixir は Earlang VM 上で動くプログラミング言語のため、コンパイルされたバイナリを置くだけでインストールがおわります。</p>

<p><code>console
wget https://github.com/elixir-lang/elixir/releases/download/v1.4.2/Precompiled.zip
unzip Precompiled.zip -d elixir
mv elixir /path/to/elixir
echo 'export PATH=/path/to/elixir/bin:$PATH' &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></p>

<h2>おわり</h2>

<p>さいごに <code>iex</code> を起動して確認すればおわり</p>

<h3>参考</h3>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>elixir getting started, https://gist.github.com/zzak/a765d6a63860d75c4444e35f57daed13, 2017/04/01 閲覧<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[みくったーでえもじ]]></title>
    <link href="http://blog.katsyoshi.org/blog/2016/12/17/emoji-in-mikutter/"/>
    <updated>2016-12-17T00:00:00+09:00</updated>
    <id>http://blog.katsyoshi.org/blog/2016/12/17/emoji-in-mikutter</id>
    <content type="html"><![CDATA[<p><a href="http://www.adventar.org/calendars/1375">mikutter advent calenedar 2016</a> 17日目の記事です
たぶんだれかが作ってた気がするけど、mikuterで<a href="https://slack.com">slack</a>や、<a href="https://github.com">github</a>のような絵文字を表示するプラグインを作成しました。</p>

<h2>なんぞそれ？</h2>

<p>ここにあります。<a href="https://github.com/katsyoshi/mikutter-emoji">mikutter-emoji</a>
<code>:tofu_on_fire:</code> みたいに <code>:</code> で囲われた文字列を絵文字に置換するだけです。</p>

<h2>つかいかた</h2>

<p><code>sh
git clone https://github.com/katsyoshi/mikutter-emoji.git ~/.mikutter/plugin/emoji
EDIT ~/.mikutter/plugin/emoji/emoji.yml
</code></p>

<p>gitでプラグインディレクトリにコピーします。
コピーしたら、絵文字の設定を <code>emoji.yml</code> に入れます。
今は5つしか登録していないので皆で登録しましょう</p>

<h2>おわり</h2>

<p>おわり</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[板前さんでGentooを管理]]></title>
    <link href="http://blog.katsyoshi.org/blog/2016/12/10/itamae-loves-gentoo/"/>
    <updated>2016-12-10T16:00:38+09:00</updated>
    <id>http://blog.katsyoshi.org/blog/2016/12/10/itamae-loves-gentoo</id>
    <content type="html"><![CDATA[<p><a href="http://www.adventar.org/calendars/1493">Gentoo Advent Calendar 2016</a> の10日目の記事です</p>

<h2>Itamaeでgentoo管理するには？</h2>

<p>そらはー(<a href="https://twitter.com/sora_h">@sora_h</a>)が作ってる <a href="https://github.com/sorah/itamae-plugin-resource-portage">itamae-plugin-resource-portage</a> 使え</p>

<h2>自作のportage管理ソフトの紹介</h2>

<p><a href="https://github.com/katsyoshi/itamae-recipes/tree/master/cookbook/gentoo">ここ</a>にあります。</p>

<h3>使いかた</h3>

<p>簡単な使いかたとしては以下のようになります</p>

<p><code>
itamae local gentoo.rb -j package.json
</code></p>

<p>これだけです。</p>

<h3>パッケージの指定方法</h3>

<p>```yaml
packages:
 &ndash; name: &lsquo;category/package&rsquo;
   portage:</p>

<pre><code> use: 'package'
 accept_keywords: 'package'
 license: 'pakcage'
</code></pre>

<p>```</p>

<p><code>name</code> で <code>category/package</code> を指定することでインストールすることができます。
<code>portage</code> では <code>use</code> などのフラグを指定して管理します。
<code>use</code> ディレクトリを作成してそこにファイルを置く必要があります。
自動生成したいけど、依存パッケージの指定方法とかまだ考えていないので取り敢えず直接指定です。</p>

<h2>おわり</h2>

<p>この方法ではitamaeのパッケージ管理方法とちがうのでいろいろとあれだなあ
とおもってたら itamae-plugin-resource-portage みつけてしまったので
itamaeで管理したいとおもう人は itamae-plugin-resource-portage を使いましょう</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[こんにちは、いたまえさん]]></title>
    <link href="http://blog.katsyoshi.org/blog/2015/08/02/hello-itamae-plugins/"/>
    <updated>2015-08-02T21:33:46+09:00</updated>
    <id>http://blog.katsyoshi.org/blog/2015/08/02/hello-itamae-plugins</id>
    <content type="html"><![CDATA[<p><a href="https://github.com/sstephenson/rbenv">rbenv</a> を <a href="https://github.com/itamae-kitchen/itamae">itamae</a> の <a href="https://github.com/k0kubun/itamae-plugin-recipe-rbenv">プラグイン</a> を利用してインストールしようとしたら、対象サーバがプロキシーのあるネットワークであり、gitでダウンロードできなかったので、<a href="https://github.com/k0kubun/itamae-plugin-recipe-rbenv/pull/9">httpsを指定できる</a>ようしてもらいました。</p>

<h2>plenv と pyenv</h2>

<p>また、rbenv のプラグインを参考に <a href="https://github.com/katsyoshi/itamae-plugin-recipe-plenv">plenv</a> と <a href="https://github.com/katsyoshi/itamae-plugin-recipe-pyenv">pyenv</a> を作ってみました。</p>

<p>これらふたつのプラグインはまだgemになっていないので、<code>Gemfile</code> に以下のように追加し、</p>

<p><code>ruby
gem 'itamae'
gem 'itamae-plugin-recipe-plenv', github: 'katsyoshi/itamae-plugin-recipe-plenv'
gem 'itamae-plugin-recipe-pyenv', github: 'katsyoshi/itamae-plugin-recipe-pyenv'
</code></p>

<p>recipeとしては以下のようにしてください。</p>

<p><code>ruby recipe.rb
include_recipe 'pyenv::system'
include_recipe 'plenv::system'
</code></p>

<p>設定例としては、rbenvのプラグインと同じように設定します。</p>

<p>```json
{
  &ldquo;plenv&rdquo; : {</p>

<pre><code>"versions" : ["5.22.0", "5.20.2"],
"global"   : "5.22.0"
</code></pre>

<p>  },
  &ldquo;pyenv&rdquo; : {</p>

<pre><code>"versions" : ["3.4.3", "3.5.0b2"],
"global"   : "3.4.3"
</code></pre>

<p>  }
}
```</p>

<h2>おわり</h2>

<p>おわり</p>
]]></content>
  </entry>
  
</feed>
